<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Electoral Voting Power</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="css/teststyle.css"> -->
  </head>
  <body>
    <div id="graphic">
      <div id="sections">
        <section class="step">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent efficitur, odio vitae rutrum molestie, justo purus consectetur est, scelerisque pharetra urna massa vitae sem. Mauris dapibus mollis rutrum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus nec quam et sem feugiat efficitur ac non dolor. Cras placerat urna sapien, ut volutpat eros luctus eu. Aenean a egestas velit. Sed pulvinar imperdiet mauris vitae convallis.
        </section>
        <section class="step">
          Vivamus non dui nec massa laoreet finibus. In eu massa sollicitudin, semper nisi ut, gravida sapien. Pellentesque fringilla scelerisque tincidunt. Aenean laoreet laoreet dapibus. In finibus luctus placerat. Phasellus non velit ac tellus tincidunt lobortis. Maecenas efficitur sed eros vitae mattis. Sed feugiat convallis massa vel consequat. Ut congue urna et ultrices ultrices. Curabitur convallis odio velit, at ullamcorper arcu eleifend eget. Proin nisi eros, vestibulum vitae ultricies id, venenatis a odio. Duis vitae pellentesque erat, nec lobortis nisl. Praesent varius est sagittis nisi aliquam, at aliquet nunc viverra. Proin tempor sagittis suscipit.
        </section>
        <section class="step">
          Sed a rutrum lorem, vel aliquam enim. Curabitur lacinia sem sit amet augue tristique tempus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nunc gravida arcu ac dolor sagittis commodo. Vestibulum feugiat metus in bibendum ultrices. Nam sapien risus, mollis et ornare vitae, convallis non nisi. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Praesent vitae arcu sed orci aliquam varius. Quisque at varius est, sit amet sagittis felis.
        </section>
        <section class="step">
          Praesent vel sem vel justo vulputate faucibus. Sed porttitor ullamcorper erat vitae egestas. Maecenas venenatis ullamcorper nisi, quis imperdiet orci iaculis et. In in tortor interdum, faucibus orci a, volutpat ligula. Morbi ac ornare libero. Curabitur et pharetra lacus. Morbi sed mauris lectus. Praesent ac feugiat dui, ac volutpat turpis.
        </section>
        <section class="step">
          Cras faucibus aliquam magna id tristique. Vestibulum consequat felis ipsum, vel iaculis velit blandit eget. Vestibulum vel sagittis augue, at hendrerit enim. Etiam a porttitor sapien. Sed nec pulvinar quam, vitae pellentesque nunc. Nullam dolor justo, sollicitudin ac sollicitudin nec, viverra quis diam. Etiam ipsum mauris, rutrum id quam eget, ultricies rhoncus odio. Nunc dapibus fermentum lectus, vitae sollicitudin tortor mollis gravida. Proin in faucibus elit. Nulla efficitur mi id nisl blandit, sit amet euismod nibh rhoncus. Maecenas interdum sapien purus, a efficitur ligula rhoncus cursus.
        </section>
      </div>
    </div>

    <div id="vis"></div>
    <div id="map-vis"></div>


    <!-- Load JS libraries -->
    <script src="js/libs/queue.v1.min.js"></script>
    <script src="js/libs/jquery.min.js"></script>
    <script src="js/libs/bootstrap.min.js"></script>
    <script src="js/libs/d3.min.js"></script>

    <script src="js/test.js"></script>

    <!-- electoral map and congress visualization -->

    <script>
      function drawpeople() {
        var svg = d3.select("#vis").append("svg")
          .attr("width", 400)
          .attr("height", 400);


        svg.append("path")
          // .attr("d", 'M 200 200 h 22 a 16,16 0 1,1 6,0 h 22 v 50 h -10 v 50 h -30 v -50 h -10 z')
          // .attr("d", 'M 200 200 h -15 v -50 h -10 v -50 h 22 a 16,16 0 1,1 6,0 h 22 v 50 h -10 v 50 z')
          .attr("d", personpath (200, 200, 1.3))
          .attr("fill", "gray")
          .attr("stroke", "black")
          .attr("stroke-width","3")
          .style("stroke-dasharray", ("10, 10"));


        svg.append("path")
          // .attr("d", 'M 200 200 h 22 a 16,16 0 1,1 6,0 h 22 v 50 h -10 v 50 h -30 v -50 h -10 z')
          // .attr("d", 'M 200 200 h -15 v -50 h -10 v -50 h 22 a 16,16 0 1,1 6,0 h 22 v 50 h -10 v 50 z')
          .attr("d", personpath (100, 200, 1))
          .attr("fill", "pink")
          .attr("stroke", "red")
          .attr("stroke-width","3");


        svg.append("path")
          // .attr("d", 'M 200 200 h 22 a 16,16 0 1,1 6,0 h 22 v 50 h -10 v 50 h -30 v -50 h -10 z')
          // .attr("d", 'M 200 200 h -15 v -50 h -10 v -50 h 22 a 16,16 0 1,1 6,0 h 22 v 50 h -10 v 50 z')
          .attr("d", personpath (300, 200, .92))
          .attr("fill", "lightblue")
          .attr("stroke", "blue")
          .attr("stroke-width","3");

        // x, y define the bottom center point, p is the percent value
        function personpath (x, y, p) {
          var h = (132 * p  - 32 - 100) / 2;
          return "M" + x + "," + y 
          + "h-15v" + (-50 - h) 
          + "h-10v" + (-50 - h) 
          + "h22a16,16 0 1,1 6,0 h22v" + (50 + h) 
          + "h-10v" + (50 + h) 
          + "z";
        }
      }

      var x = w.innerWidth || e.clientWidth || g.clientWidth;
      var fin_json, fin_data;

      var svg = d3.select("#map-vis").append("svg")
        .attr("width", x)
        .attr("height", 400);

      queue()
        .defer(d3.json, 'data/us-states.json')
        .defer(d3.csv, 'data/allcartogramdata.csv')
        .await(wrangleData(error, json, data));

      function wrangleData(error, json, data) {

        data.forEach(function(d) {
          data.clintonvotes = +data.clintonvotes;
          data.clintonpercent = +data.clintonpercent;
          data.trumpvotes = +data.trumpvotes;
          data.trumppercent = +data.trumppercent;
          data.othervotes = +data.othervotes;
          data.otherpercent = +data.otherpercent;
          data.electoralvotes = +data.electoralvotes;
          data.electoralvotesfactor = +data.electoralvotesfactor;
          data.electoralpower = +data.electoralpower;
        });
        data.forEach(function(d,index) {
            fin_data[d.state] = d;
        });

        fin_json = json;

        console.log(fin_json);
        console.log(fin_data);

        // for (var j = 0; j < fin_json.features.length; j++) {
        //   if (fin_data[fin_json.features[j].properties.name]){
        //       fin_json.features[j].properties.ElectoralToPopRatio = data[json.features[j].properties.name].ElectoralToPopRatio;
        //       fin_json.features[j].properties["2016Vote"] = data[json.features[j].properties.name]["2016Vote"];
        //       fin_json.features[j].properties["PercentElectoralVotes"] = data[json.features[j].properties.name]["PercentElectoralVotes"];

        //   }
        // }
      }





    </script>






      
  </body>
</html>